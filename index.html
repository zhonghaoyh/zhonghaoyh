<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中碳普惠云AI服务 - 数据仪表盘</title>
    <!-- 引入Element Plus -->
    <link rel="stylesheet" href="https://unpkg.com/element-plus/dist/index.css">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/element-plus"></script>
    <!-- 引入ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #f0f9eb;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            color: #67c23a;
        }

        .date-range {
            text-align: center;
            color: #606266;
            margin-bottom: 30px;
        }

        .overview {
            margin-bottom: 40px;
        }

        .overview-section {
            margin-bottom: 20px;
        }

        .overview-section-title {
            font-size: 16px;
            color: #606266;
            margin-bottom: 15px;
            padding-left: 10px;
            border-left: 4px solid #67c23a;
        }

        .overview-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #67c23a 0%, #95d475 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(103, 194, 58, 0.2);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            cursor: pointer;
            transform: translateY(-5px);
        }

        .stat-title {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-icon {
            font-size: 20px;
            margin-bottom: 10px;
        }

        .charts-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 40px;
        }

        .chart-item {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 12px 0 rgba(0, 0, 0, .1);
        }

        .module-card {
            background: #fff;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            margin-bottom: 25px;
            transition: all 0.3s ease;
        }

        .module-card:hover {
            box-shadow: 0 6px 24px rgba(0, 0, 0, 0.12);
        }

        .module-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .module-card-title {
            font-size: 20px;
            font-weight: bold;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module-card-title .icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            background: #f0f9eb;
            color: #67c23a;
        }

        .chart {
            width: 100%;
            height: 380px;
            transition: all 0.3s ease;
        }

        .chart:hover {
            transform: scale(1.01);
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
            margin-top: 20px;
        }

        .chart-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 12px 16px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .chart-controls-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .chart-controls-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module-title {
            font-size: 16px;
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .module-title .icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            background: #f0f9eb;
            color: #67c23a;
        }

        .chart-item {
            background: #fff;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .chart-item:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
        }

        .chart-summary {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #e0e0e0;
        }

        .summary-item {
            flex: 1;
            text-align: center;
        }

        .summary-label {
            font-size: 13px;
            color: #909399;
            margin-bottom: 4px;
        }

        .summary-value {
            font-size: 16px;
            font-weight: 500;
            color: #2c3e50;
        }

        .summary-trend {
            font-size: 12px;
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-flex;
            align-items: center;
            gap: 2px;
            margin-left: 4px;
        }

        .summary-trend.up {
            background: #f0f9eb;
            color: #67c23a;
        }

        .summary-trend.down {
            background: #fef0f0;
            color: #f56c6c;
        }

        .chart-actions {
            margin-top: 15px;
            display: flex;
            justify-content: flex-end;
            gap: 8px;
        }
    </style>
</head>

<body>
    <div id="app" class="container">
        <div class="header">
            <h1>中碳普惠云AI服务 - 数据仪表盘</h1>
        </div>
        <div class="date-range">
            <h3>统计范围：2023-06-13 至 2025-08-20</h3>
            <h5 style="color: #f56c6c;">注：以下数据均为模拟数据，旨在展示当前可统计的数据。</h5>
        </div>

        <div class="overview">
            <h2>一、总体统计概览</h2>

            <!-- 用户数据 -->
            <div class="overview-section">
                <div class="overview-section-title">用户数据</div>
                <div class="overview-grid">
                    <div class="stat-card" @click="scrollToModule('guest-statistics')">
                        <div class="stat-title">游客访问统计</div>
                        <div class="stat-value">1,234</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">用户注册统计</div>
                        <div class="stat-value">456</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">活跃用户数</div>
                        <div class="stat-value">123</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">付费用户数</div>
                        <div class="stat-value">123</div>
                    </div>
                </div>
            </div>

            <!-- 会话数据 -->
            <div class="overview-section">
                <div class="overview-section-title">会话数据</div>
                <div class="overview-grid">
                    <div class="stat-card" @click="scrollToModule('conversation-statistics')">
                        <div class="stat-title">AI会话</div>
                        <div class="stat-value">6,702</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('conversation-statistics')">
                        <div class="stat-title">碳盘查会话</div>
                        <div class="stat-value">2,234</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('conversation-statistics')">
                        <div class="stat-title">碳足迹会话</div>
                        <div class="stat-value">3,234</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('conversation-statistics')">
                        <div class="stat-title">ESG会话</div>
                        <div class="stat-value">4,234</div>
                    </div>
                </div>
            </div>

            <!-- 业务数据 -->
            <div class="overview-section">
                <div class="overview-section-title">业务数据</div>
                <div class="overview-grid">
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">总订单量</div>
                        <div class="stat-value">555</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">总成交额</div>
                        <div class="stat-value">¥9999,999</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">件均金额</div>
                        <div class="stat-value">¥100</div>
                    </div>
                    <div class="stat-card" @click="scrollToModule('user-registration')">
                        <div class="stat-title">已接入渠道</div>
                        <div class="stat-value">2</div>
                    </div>
                </div>
            </div>
        </div>

        <h2>二、业务数据分析</h2>

        <!-- 2.1游客访问统计 -->
        <div class="module-card" id="guest-statistics">
            <div class="module-card-header">
                <div class="module-card-title">
                    2.1 游客访问统计
                </div>
            </div>
            <div class="chart-controls">
                <div class="chart-controls-left">
                    <el-icon>
                        <Calendar />
                    </el-icon>
                    <span>时间范围：</span>
                    <el-date-picker v-model="visitorDateRange" type="daterange" range-separator="至"
                        start-placeholder="开始日期" end-placeholder="结束日期" :shortcuts="dateShortcuts"
                        @change="updateVisitorModuleCharts" />
                </div>
                <div class="chart-controls-right">
                    <el-button-group>
                        <el-button size="small" type="primary">日</el-button>
                        <el-button size="small">周</el-button>
                        <el-button size="small">月</el-button>
                    </el-button-group>
                </div>
            </div>
            <div class="chart-grid">
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <TrendCharts />
                            </el-icon></div>
                        游客数量趋势
                    </h3>
                    <div id="visitorChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">当期访问量</div>
                            <div class="summary-value">
                                1,234
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <PieChart />
                            </el-icon></div>
                        游客来源分布
                    </h3>
                    <div id="visitorSourceChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">主要来源</div>
                            <div class="summary-value">中碳普惠云</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">来源占比</div>
                            <div class="summary-value">44.3%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2.2用户注册统计 -->
        <div class="module-card" id="user-registration">
            <div class="module-card-header" id="user-registration">
                <div class="module-card-title">
                    2.2 用户注册统计
                </div>
            </div>
            <div class="chart-controls">
                <div class="chart-controls-left">
                    <el-icon>
                        <Calendar />
                    </el-icon>
                    <span>时间范围：</span>
                    <el-date-picker v-model="userDateRange" type="daterange" range-separator="至"
                        start-placeholder="开始日期" end-placeholder="结束日期" :shortcuts="dateShortcuts"
                        @change="updateUserModuleCharts" />
                </div>
                <div class="chart-controls-right">
                    <el-button-group>
                        <el-button size="small" type="primary">日</el-button>
                        <el-button size="small">周</el-button>
                        <el-button size="small">月</el-button>
                    </el-button-group>
                </div>
            </div>
            <div class="chart-grid">
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <TrendCharts />
                            </el-icon></div>
                        注册用户数量趋势
                    </h3>
                    <div id="userChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">新增用户</div>
                            <div class="summary-value">
                                456
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <PieChart />
                            </el-icon></div>
                        注册用户来源分布
                    </h3>
                    <div id="userSourceChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">主要来源</div>
                            <div class="summary-value">中碳普惠云</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">来源占比</div>
                            <div class="summary-value">40.2%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2.3会话数据统计 -->
        <div class="module-card" id="conversation-statistics">
            <div class="module-card-header">
                <div class="module-card-title">
                    2.3 会话数据统计
                </div>
            </div>
            <div class="chart-controls">
                <div class="chart-controls-left">
                    <el-icon>
                        <Calendar />
                    </el-icon>
                    <span>时间范围：</span>
                    <el-date-picker v-model="sessionDateRange" type="daterange" range-separator="至"
                        start-placeholder="开始日期" end-placeholder="结束日期" :shortcuts="dateShortcuts"
                        @change="updateSessionModuleCharts" />
                </div>
                <div class="chart-controls-right">
                    <el-button-group>
                        <el-button size="small" type="primary">日</el-button>
                        <el-button size="small">周</el-button>
                        <el-button size="small">月</el-button>
                    </el-button-group>
                </div>
            </div>
            <div class="chart-grid">
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <TrendCharts />
                            </el-icon></div>
                        会话数量趋势
                    </h3>
                    <div id="sessionChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">总会话数</div>
                            <div class="summary-value">
                                6,702
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <PieChart />
                            </el-icon></div>
                        会话类型分布
                    </h3>
                    <div id="sessionTypeChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">主要类型</div>
                            <div class="summary-value">AI会话</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">类型占比</div>
                            <div class="summary-value">44.3%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2.4订单数据统计 -->
        <div class="module-card" id="order-statistics">
            <div class="module-card-header">
                <div class="module-card-title">
                    2.4 订单数据统计
                </div>
            </div>
            <div class="chart-controls">
                <div class="chart-controls-left">
                    <el-icon>
                        <Calendar />
                    </el-icon>
                    <span>时间范围：</span>
                    <el-date-picker v-model="productDateRange" type="daterange" range-separator="至"
                        start-placeholder="开始日期" end-placeholder="结束日期" :shortcuts="dateShortcuts"
                        @change="updateProductModuleCharts" />
                </div>
                <div class="chart-controls-right">
                    <el-button-group>
                        <el-button size="small" type="primary">日</el-button>
                        <el-button size="small">周</el-button>
                        <el-button size="small">月</el-button>
                    </el-button-group>
                </div>
            </div>
            <div class="chart-grid">
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <DataLine />
                            </el-icon></div>
                        订单支付趋势
                    </h3>
                    <div id="orderTrendChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">支付订单数</div>
                            <div class="summary-value">
                                567
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <PieChart />
                            </el-icon></div>
                        订单状态分布
                    </h3>
                    <div id="orderStatusChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">总订单数</div>
                            <div class="summary-value">
                                924
                            </div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">支付占比</div>
                            <div class="summary-value">50.3%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2.5服务数据统计 -->
        <div class="module-card" id="service-statistics">
            <div class="module-card-header">
                <div class="module-card-title">
                    2.5 服务数据统计
                </div>
            </div>
            <div class="chart-controls">
                <div class="chart-controls-left">
                    <el-icon>
                        <Calendar />
                    </el-icon>
                    <span>时间范围：</span>
                    <el-date-picker v-model="serviceDateRange" type="daterange" range-separator="至"
                        start-placeholder="开始日期" end-placeholder="结束日期" :shortcuts="dateShortcuts"
                        @change="updateServiceModuleCharts" />
                </div>
                <div class="chart-controls-right">
                    <el-button-group>
                        <el-button size="small" type="primary">日</el-button>
                        <el-button size="small">周</el-button>
                        <el-button size="small">月</el-button>
                    </el-button-group>
                </div>
            </div>
            <div class="chart-grid">
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <DataAnalysis />
                            </el-icon></div>
                        碳盘查服务状态
                    </h3>
                    <div id="carbonInquiryStatusChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">总服务数量</div>
                            <div class="summary-value">846</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">主要状态</div>
                            <div class="summary-value">已购买</div>
                        </div>
                    </div>
                </div>
                <div class="chart-item">
                    <h3 class="module-title">
                        <div class="icon"><el-icon>
                                <DataAnalysis />
                            </el-icon></div>
                        碳足迹服务状态
                    </h3>
                    <div id="carbonFootprintStatusChart" class="chart"></div>
                    <div class="chart-summary">
                        <div class="summary-item">
                            <div class="summary-label">总服务数量</div>
                            <div class="summary-value">325</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">主要状态</div>
                            <div class="summary-value">试用申请通过</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref } = Vue;

        const app = createApp({
            setup() {
                // 将 scrollToModule 函数移到 setup 中
                const scrollToModule = (moduleId) => {
                    const element = document.getElementById(moduleId);
                    if (element) {
                        element.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                };

                const visitorDateRange = ref([]);
                const userDateRange = ref([]);
                const sessionDateRange = ref([]);
                const productDateRange = ref([]);
                const serviceDateRange = ref([]);

                const dateShortcuts = [
                    {
                        text: '最近一周',
                        value: () => {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
                            return [start, end];
                        }
                    },
                    {
                        text: '最近一个月',
                        value: () => {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
                            return [start, end];
                        },
                    },
                    {
                        text: '最近三个月',
                        value: () => {
                            const end = new Date();
                            const start = new Date();
                            start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
                            return [start, end];
                        },
                    },
                ];

                return {
                    scrollToModule,
                    visitorDateRange,
                    userDateRange,
                    sessionDateRange,
                    productDateRange,
                    serviceDateRange,
                    dateShortcuts,
                };
            },
            mounted() {
                this.initCharts();
            },
            methods: {
                initCharts() {
                    // 游客数量趋势
                    this.visitorChart = echarts.init(document.getElementById('visitorChart'));
                    this.visitorChart.setOption({
                        color: ['#409EFF'],
                        tooltip: {
                            trigger: 'axis'
                        },
                        xAxis: {
                            type: 'category',
                            data: ['7/20', '7/25', '7/30', '8/4', '8/9', '8/14', '8/19']
                        },
                        yAxis: {
                            type: 'value',
                            name: '访问人数'
                        },
                        series: [{
                            name: '游客数量',
                            data: [820, 932, 901, 934, 1290, 1330, 1520],
                            type: 'line',
                            smooth: true,
                            areaStyle: {
                                opacity: 0.3
                            }
                        }]
                    });

                    // 游客来源分布
                    this.visitorSourceChart = echarts.init(document.getElementById('visitorSourceChart'));
                    this.visitorSourceChart.setOption({
                        color: ['#67C23A', '#E6A23C', '#F56C6C'],
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            right: 'right'
                        },
                        series: [{
                            name: '游客来源',
                            type: 'pie',
                            radius: '60%',
                            data: [
                                { value: 1048, name: '中碳普惠云' },
                                { value: 735, name: '中钢协' },
                                { value: 580, name: '华证' }
                            ]
                        }]
                    });

                    // 用户数量趋势
                    this.userChart = echarts.init(document.getElementById('userChart'));
                    this.userChart.setOption({
                        color: ['#67C23A'],
                        tooltip: {
                            trigger: 'axis'
                        },
                        xAxis: {
                            type: 'category',
                            data: ['7/20', '7/25', '7/30', '8/4', '8/9', '8/14', '8/19']
                        },
                        yAxis: {
                            type: 'value',
                            name: '用户数'
                        },
                        series: [{
                            name: '注册用户',
                            data: [420, 532, 601, 734, 890, 1030, 1220],
                            type: 'line',
                            smooth: true,
                            areaStyle: {
                                opacity: 0.3
                            }
                        }]
                    });

                    // 用户来源分布
                    this.userSourceChart = echarts.init(document.getElementById('userSourceChart'));
                    this.userSourceChart.setOption({
                        color: ['#67C23A', '#E6A23C', '#F56C6C'],
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            right: 'right'
                        },
                        series: [{
                            name: '用户来源',
                            type: 'pie',
                            radius: '60%',
                            data: [
                                { value: 548, name: '中碳普惠云' },
                                { value: 435, name: '中钢协' },
                                { value: 380, name: '华证' }
                            ]
                        }]
                    });

                    // 会话数量趋势
                    this.sessionChart = echarts.init(document.getElementById('sessionChart'));
                    this.sessionChart.setOption({
                        color: ['#E7ADEB'],
                        tooltip: {
                            trigger: 'axis'
                        },
                        xAxis: {
                            type: 'category',
                            data: ['7/20', '7/25', '7/30', '8/4', '8/9', '8/14', '8/19']
                        },
                        yAxis: {
                            type: 'value',
                            name: '会话数'
                        },
                        series: [{
                            name: '会话数量',
                            data: [1200, 1332, 1401, 1534, 1790, 1930, 2120],
                            type: 'line',
                            showSymbol: true,
                            symbolSize: 6,
                            lineStyle: {
                                width: 2
                            }
                        }]
                    });

                    // 会话类型分布
                    this.sessionTypeChart = echarts.init(document.getElementById('sessionTypeChart'));
                    this.sessionTypeChart.setOption({
                        color: ['#6CE3F5', '#3A65C2', '#E640FF','#fad0c4'],
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            right: 'right'
                        },
                        series: [{
                            name: '会话类型',
                            type: 'pie',
                            radius: ['40%', '70%'],
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 10,
                                borderColor: '#fff',
                                borderWidth: 2
                            },
                            label: {
                                show: true,
                                formatter: '{b}: {c}'
                            },
                            emphasis: {
                                label: {
                                    show: true,
                                    fontSize: 16,
                                    fontWeight: 'bold'
                                }
                            },
                            data: [
                                { value: 1048, name: 'AI会话' },
                                { value: 735, name: '碳盘查会话' },
                                { value: 580, name: '碳足迹会话' },
                                { value: 580, name: 'ESG会话' }
                            ]
                        }]
                    });

                    // 订单支付趋势
                    this.orderTrendChart = echarts.init(document.getElementById('orderTrendChart'));
                    this.orderTrendChart.setOption({
                        color: ['#409EFF', '#67C23A'],
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            },
                            formatter: function (params) {
                                var result = params[0].axisValueLabel + '<br/>';
                                params.forEach(function (item) {
                                    var value = item.seriesName === '支付金额' ? '¥' + item.value : item.value;
                                    result += item.marker + ' ' + item.seriesName + ': ' + value + '<br/>';
                                });
                                return result;
                            }
                        },
                        legend: {
                            data: ['订单数量', '支付金额']
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: ['7/20', '7/25', '7/30', '8/4', '8/9', '8/14', '8/19']
                        },
                        yAxis: [
                            {
                                type: 'value',
                                name: '订单数量',
                                position: 'left',
                                axisLine: {
                                    show: true,
                                    lineStyle: {
                                        color: '#409EFF'
                                    }
                                },
                                axisLabel: {
                                    formatter: '{value}'
                                }
                            },
                            {
                                type: 'value',
                                name: '支付金额',
                                position: 'right',
                                axisLine: {
                                    show: true,
                                    lineStyle: {
                                        color: '#67C23A'
                                    }
                                },
                                axisLabel: {
                                    formatter: '¥{value}'
                                }
                            }
                        ],
                        series: [
                            {
                                name: '订单数量',
                                type: 'bar',
                                barWidth: '15',
                                yAxisIndex: 0,
                                data: [120, 132, 145, 160, 178, 190, 210],
                                itemStyle: {
                                    borderRadius: [4, 4, 0, 0]
                                },
                                emphasis: {
                                    focus: 'series'
                                }
                            },
                            {
                                name: '支付金额',
                                type: 'bar',
                                barWidth: '15',
                                yAxisIndex: 1,
                                data: [2300, 2100, 3200, 4500, 6300, 7800, 8500],
                                itemStyle: {
                                    borderRadius: [4, 4, 0, 0]
                                },
                                emphasis: {
                                    focus: 'series'
                                }
                            }
                        ]
                    });

                    // 订单状态分布（南丁格尔玫瑰图）
                    this.orderStatusChart = echarts.init(document.getElementById('orderStatusChart'));
                    this.orderStatusChart.setOption({
                        color: ['#6CE3F5', '#3A65C2', '#E640FF','#fad0c4','#a18cd1','#c2e9fb','#96e6a1'],
                        tooltip: {
                            trigger: 'item',
                            formatter: '{a} <br/>{b}: {c} ({d}%)'
                        },
                        legend: {
                            orient: 'vertical',
                            right: 'right'
                        },
                        series: [{
                            name: '订单状态',
                            type: 'pie',
                            roseType: 'area',
                            avoidLabelOverlap: false,
                            itemStyle: {
                                borderRadius: 10,
                                borderColor: '#fff',
                                borderWidth: 2
                            },
                            label: {
                                show: true,
                                formatter: '{b}: {c}'
                            },
                            emphasis: {
                                label: {
                                    show: true,
                                    fontSize: 16,
                                    fontWeight: 'bold'
                                }
                            },
                            data: [
                                { value: 234, name: '未支付' },
                                { value: 567, name: '已支付' },
                                { value: 423, name: '已升级' },
                                { value: 323, name: '升级中' },
                                { value: 623, name: '已升级' },
                                { value: 123, name: '已取消' },
                                { value: 223, name: '退款中' },
                                { value:123, name: '已退款' }
                            ]
                        }]
                    });

                    // 碳盘查服务状态
                    this.carbonInquiryStatusChart = echarts.init(document.getElementById('carbonInquiryStatusChart'));
                    this.carbonInquiryStatusChart.setOption({
                        color: ['#67C23A', '#409EFF', '#E6A23C', '#F56C6C', '#909399'],
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: ['已购买', '正在使用中', '处于升级中', '使用完毕', '已升级']
                        },
                        yAxis: {
                            type: 'value',
                            name: '服务数量'
                        },
                        series: [
                            {
                                type: 'bar',
                                barWidth: '40%',
                                data: [
                                    { value: 320, itemStyle: { color: '#67C23A' } },  // 已购买 - 绿色
                                    { value: 220, itemStyle: { color: '#409EFF' } },  // 正在使用中 - 蓝色
                                    { value: 150, itemStyle: { color: '#E6A23C' } },  // 处于升级中 - 黄色
                                    { value: 80, itemStyle: { color: '#F56C6C' } },   // 禁止使用 - 红色
                                    { value: 76, itemStyle: { color: '#909399' } }    // 已升级 - 灰色
                                ],
                                label: {
                                    show: true,
                                    position: 'top'
                                }
                            }
                        ]
                    });

                    // 碳足迹服务状态
                    this.carbonFootprintStatusChart = echarts.init(document.getElementById('carbonFootprintStatusChart'));
                    this.carbonFootprintStatusChart.setOption({
                        color: ['#67C23A', '#409EFF', '#F56C6C'],
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {
                                type: 'shadow'
                            }
                        },
                        grid: {
                            left: '3%',
                            right: '4%',
                            bottom: '3%',
                            containLabel: true
                        },
                        xAxis: {
                            type: 'category',
                            data: ['试用申请中', '试用申请通过', '试用申请拒绝']
                        },
                        yAxis: {
                            type: 'value',
                            name: '服务数量'
                        },
                        series: [
                            {
                                type: 'bar',
                                barWidth: '40%',
                                data: [
                                    { value: 150, itemStyle: { color: '#E6A23C' } },  // 试用申请中 - 黄色
                                    { value: 120, itemStyle: { color: '#67C23A' } },  // 试用申请通过 - 绿色
                                    { value: 55, itemStyle: { color: '#F56C6C' } }    // 试用申请拒绝 - 红色
                                ],
                                label: {
                                    show: true,
                                    position: 'top'
                                }
                            }
                        ]
                    });

                    // 响应式调整
                    window.addEventListener('resize', () => {
                        this.visitorChart?.resize();
                        this.visitorSourceChart?.resize();
                        this.userChart?.resize();
                        this.userSourceChart?.resize();
                        this.sessionChart?.resize();
                        this.sessionTypeChart?.resize();
                        this.orderTrendChart?.resize();
                        this.orderStatusChart?.resize();
                        this.carbonScopeChart?.resize();
                        this.carbonInquiryStatusChart?.resize();
                        this.carbonFootprintStatusChart?.resize();
                    });
                },

                // 更新图表数据的方法
                // 生成日期数据点
                generateDatePoints(startDate, endDate, pointCount = 7) {
                    const dates = [];
                    const timeSpan = endDate - startDate;
                    const interval = timeSpan / (pointCount - 1);

                    for (let i = 0; i < pointCount; i++) {
                        const currentDate = new Date(startDate.getTime() + interval * i);
                        dates.push(currentDate.toLocaleDateString('zh-CN', { month: 'numeric', day: 'numeric' }));
                    }

                    return dates;
                },

                updateVisitorModuleCharts() {
                    if (!this.visitorDateRange || !this.visitorDateRange[0] || !this.visitorDateRange[1]) return;

                    const [startDate, endDate] = this.visitorDateRange;
                    const datePoints = this.generateDatePoints(startDate, endDate);

                    // 更新游客数量趋势
                    const trendData = datePoints.map(() => Math.floor(Math.random() * 1000 + 500));
                    this.visitorChart.setOption({
                        xAxis: {
                            data: datePoints
                        },
                        series: [{
                            data: trendData
                        }]
                    });

                    // 更新游客来源分布
                    const sourceData = [
                        { value: Math.floor(Math.random() * 1000 + 500), name: '中碳普惠云' },
                        { value: Math.floor(Math.random() * 800 + 300), name: '中钢协' },
                        { value: Math.floor(Math.random() * 600 + 200), name: '华证' }
                    ];
                    this.visitorSourceChart.setOption({
                        series: [{
                            data: sourceData
                        }]
                    });

                    // 更新总览数据
                    const totalVisits = trendData.reduce((sum, current) => sum + current, 0);
                    this.overviewData.value[0].value = totalVisits.toLocaleString();
                },

                updateUserModuleCharts() {
                    if (!this.userDateRange || !this.userDateRange[0] || !this.userDateRange[1]) return;

                    const [startDate, endDate] = this.userDateRange;
                    const datePoints = this.generateDatePoints(startDate, endDate);

                    // 更新用户数量趋势
                    const trendData = datePoints.map(() => Math.floor(Math.random() * 1000 + 300));
                    this.userChart.setOption({
                        xAxis: {
                            data: datePoints
                        },
                        series: [{
                            data: trendData
                        }]
                    });

                    // 更新用户来源分布
                    const sourceData = [
                        { value: Math.floor(Math.random() * 500 + 300), name: '中碳普惠云' },
                        { value: Math.floor(Math.random() * 400 + 200), name: '中钢协' },
                        { value: Math.floor(Math.random() * 300 + 100), name: '华证' }
                    ];
                    this.userSourceChart.setOption({
                        series: [{
                            data: sourceData
                        }]
                    });

                    // 更新总览数据
                    const totalUsers = trendData.reduce((sum, current) => sum + current, 0);
                    this.overviewData.value[1].value = totalUsers.toLocaleString();
                },

                updateSessionModuleCharts() {
                    if (!this.sessionDateRange || !this.sessionDateRange[0] || !this.sessionDateRange[1]) return;

                    const [startDate, endDate] = this.sessionDateRange;
                    const datePoints = this.generateDatePoints(startDate, endDate);

                    // 更新会话数量趋势
                    const trendData = datePoints.map(() => Math.floor(Math.random() * 2000 + 1000));
                    this.sessionChart.setOption({
                        xAxis: {
                            data: datePoints
                        },
                        series: [{
                            data: trendData
                        }]
                    });

                    // 更新会话类型分布
                    const aiSessions = Math.floor(Math.random() * 1000 + 800);
                    const carbonSessions = Math.floor(Math.random() * 800 + 600);
                    const footprintSessions = Math.floor(Math.random() * 600 + 400);
                    const esgSessions = Math.floor(Math.random() * 400 + 300);

                    const typeData = [
                        { value: aiSessions, name: 'AI会话' },
                        { value: carbonSessions, name: '碳盘查会话' },
                        { value: footprintSessions, name: '碳足迹会话' },
                        { value: esgSessions, name: 'ESG会话' }
                    ];
                    this.sessionTypeChart.setOption({
                        series: [{
                            data: typeData
                        }]
                    });

                    // 更新总览数据
                    this.overviewData.value[2].value = aiSessions.toLocaleString();
                    this.overviewData.value[3].value = carbonSessions.toLocaleString();
                    this.overviewData.value[4].value = footprintSessions.toLocaleString();
                    this.overviewData.value[5].value = esgSessions.toLocaleString();
                },

                updateProductModuleCharts() {
                    if (!this.productDateRange || !this.productDateRange[0] || !this.productDateRange[1]) return;

                    const [startDate, endDate] = this.productDateRange;
                    // 订单趋势:
                    const datePoints = this.generateDatePoints(startDate, endDate);
                    const trendData = datePoints.map(() => Math.floor(Math.random() * 200 + 100));
                    this.orderTrendChart.setOption({
                        xAxis: {
                            data: datePoints
                        },
                        series: [{
                            data: trendData
                        }]
                    });

                    // 更新订单状态分布
                    const unpaidOrders = Math.floor(Math.random() * 300 + 100);
                    const paidOrders = Math.floor(Math.random() * 600 + 400);
                    const upgradedOrders = Math.floor(Math.random() * 200 + 100);

                    const orderData = [
                        { value: unpaidOrders, name: '未支付' },
                        { value: paidOrders, name: '已支付' },
                        { value: upgradedOrders, name: '已升级' }
                    ];
                    this.orderStatusChart.setOption({
                        series: [{
                            data: orderData
                        }]
                    });

                    // 更新总览数据
                    const totalOrders = unpaidOrders + paidOrders + upgradedOrders;
                    this.overviewData.value[5].value = totalOrders.toLocaleString();
                },

                updateServiceModuleCharts() {
                    if (!this.serviceDateRange || !this.serviceDateRange[0] || !this.serviceDateRange[1]) return;

                    // 更新碳盘查服务状态
                    const carbonInquiryData = [
                        Math.floor(Math.random() * 400 + 200),
                        Math.floor(Math.random() * 300 + 150),
                        Math.floor(Math.random() * 200 + 100),
                        Math.floor(Math.random() * 100 + 50),
                        Math.floor(Math.random() * 100 + 50)
                    ];

                    this.carbonInquiryStatusChart.setOption({
                        series: [{
                            data: carbonInquiryData
                        }]
                    });

                    // 更新碳足迹服务状态
                    const carbonFootprintData = [
                        Math.floor(Math.random() * 200 + 100),
                        Math.floor(Math.random() * 150 + 100),
                        Math.floor(Math.random() * 100 + 30)
                    ];

                    this.carbonFootprintStatusChart.setOption({
                        series: [{
                            data: carbonFootprintData
                        }]
                    });
                }
            }
        });

        app.use(ElementPlus);
        app.mount('#app');
    </script>
</body>

</html>